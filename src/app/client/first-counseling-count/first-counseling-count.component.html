<div class="container mt-5 mb-5">
  <h3>Reports</h3>

  <app-date-picker
    [mode]="'date'"
    (dateRangeChange)="onDateRangeSelected($event)"></app-date-picker>
  <button class="btn btn-primary" (click)="fetchGenericCount()">Fetch Count</button>

  <div class="form-check mt-4">
    <input class="form-check-input" type="checkbox" [(ngModel)]="totalNumberOfClientsBoolean" id="totalNumber">
    <label class="form-check-label" for="totalNumber">
      Get the total number of people who received advice within a specific time period.
    </label>
  </div>

  @if (totalNumberOfClientsError) {
    <div class="mt-3 alert alert-danger">{{ totalNumberOfClientsError }}</div>
  }
  @if (!totalNumberOfClientsError && totalNumberOfClientsResult !== null) {
    <div class="mt-3 alert alert-info">
      Total number of clients in Range: <strong>{{ totalNumberOfClientsResult }}</strong>
    </div>
  }

  <div class="form-check mt-3">
    <input class="form-check-input" type="checkbox" [(ngModel)]="nationalityCountBoolean" id="nationalityCount">
    <label class="form-check-label" for="nationalityCount">
      Receive the specified nationalities
    </label>
  </div>

  @if (nationalityError) {
    <div class="mt-3 alert alert-danger">{{ nationalityError }}</div>
  }
  @if (!nationalityError && nationalitiesResult !== null) {
    <div class="mt-3 alert alert-info">
      Nationalities in range:<br>
      <strong>
        @for (nationality of nationalitiesResult; track nationality) {
          <hr>
          <span [innerHTML]="nationality.nationality"></span>:
          <span [innerHTML]="nationality.count"></span>
        }
      </strong>
    </div>
  }

  <div class="form-check mt-3">
    <input class="form-check-input" type="checkbox" [(ngModel)]="firstCounselingOnly" id="firstCounselingOnly">
    <label class="form-check-label" for="firstCounselingOnly">
      Get the number of clients who received a consultation for the first time within the specified time period.
    </label>
  </div>

  @if (error) {
    <div class="mt-3 alert alert-danger">{{ error }}</div>
  }
  @if (!error && firstCounselingOnlyResult !== null) {
    <div *ngIf="!error && firstCounselingOnlyResult !== null" class="mt-3 alert alert-info">
      Number of clients with first counseling in range: <strong>{{ firstCounselingOnlyResult }}</strong>
    </div>
  }

  <div class="form-check mt-3">
    <input class="form-check-input" type="checkbox" [(ngModel)]="languagesUsed" id="languagesUsed">
    <label class="form-check-label" for="languagesUsed">
      Get the number of languages used in the consultation for which an interpreter was required
    </label>
  </div>

  <div *ngIf="languageError" class="mt-3 alert alert-danger">{{ languageError }}</div>
  <div *ngIf="!languageError && languagesUsedResult !== null" class="mt-3 alert alert-info">
    languages in range:<br>
    <strong>
      @for (language of languagesUsedResult; track language) {
        <hr>
        <span [innerHTML]="language.language"></span>:
        <span [innerHTML]="language.count"></span>
      }
    </strong>
  </div>
</div>
<div style="height: 1000px;"></div>
