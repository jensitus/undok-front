<div class="container mt-5 mb-5">
  <h3>Reports</h3>

  <app-date-picker
    [mode]="'date'"
    (dateRangeChange)="onDateRangeSelected($event)"></app-date-picker>
  <button class="btn btn-primary" (click)="fetchGenericCount()">Fetch Reports</button>

  <div class="form-check mt-4">
    <input class="form-check-input" type="checkbox" [(ngModel)]="totalNumberOfClientsBoolean" id="totalNumber">
    <label class="form-check-label" for="totalNumber">
      Get the total number of people who received advice within a specific time period.
    </label>
  </div>

  @if (totalNumberOfClientsError) {
    <div class="mt-3 alert alert-danger">{{ totalNumberOfClientsError }}</div>
  }
  @if (!totalNumberOfClientsError && totalNumberOfClientsResult !== null) {
    <div class="mt-3 alert alert-info">
      Total number of clients in Range: <strong>{{ totalNumberOfClientsResult }}</strong>
    </div>
  }

  <div class="form-check mt-3">
    <input class="form-check-input" type="checkbox" [(ngModel)]="nationalityCountBoolean" id="nationalityCount">
    <label class="form-check-label" for="nationalityCount">
      Receive the specified nationalities
    </label>
  </div>

  @if (nationalityError) {
    <div class="mt-3 alert alert-danger">{{ nationalityError }}</div>
  }
  @if (!nationalityError && nationalitiesResult !== null) {
    <div class="mt-3 alert alert-info">
      Nationalities in range:<br>
      <strong>
        @for (nationality of nationalitiesResult; track nationality) {
          <hr>
          <span [innerHTML]="nationality.nationality"></span>:
          <span [innerHTML]="nationality.count"></span>
        }
      </strong>
    </div>
  }

  <div class="form-check mt-3">
    <input class="form-check-input" type="checkbox" [(ngModel)]="firstCounselingOnly" id="firstCounselingOnly">
    <label class="form-check-label" for="firstCounselingOnly">
      Get the number of clients who received a consultation for the first time within the specified time period.
    </label>
  </div>

  @if (error) {
    <div class="mt-3 alert alert-danger">{{ error }}</div>
  }
  @if (!error && firstCounselingOnlyResult !== null) {
    <div class="mt-3 alert alert-info">
      Number of clients with first counseling in range: <strong>{{ firstCounselingOnlyResult }}</strong>
    </div>
  }

  <div class="form-check mt-3">
    <input class="form-check-input" type="checkbox" [(ngModel)]="languagesUsed" id="languagesUsed">
    <label class="form-check-label" for="languagesUsed">
      Get the number of languages used in the consultation for which an interpreter was required
    </label>
  </div>

  <div *ngIf="languageError" class="mt-3 alert alert-danger">{{ languageError }}</div>
  <div *ngIf="!languageError && languagesUsedResult !== null" class="mt-3 alert alert-info">
    languages in range:<br>
    <strong>
      @for (language of languagesUsedResult; track language) {
        <hr>
        <span [innerHTML]="language.language"></span>:
        <span [innerHTML]="language.count"></span>
      }
    </strong>
  </div>

  <div class="form-check mt-3">
    <input class="form-check-input" type="checkbox" [(ngModel)]="genderBoolean" id="genderCount">
    <label class="form-check-label" for="genderCount">
      Get the genders and how many clients are assigned to each
    </label>
  </div>

  @if (genderError) {
    <div class="mt-3 alert alert-danger">{{ genderError }}</div>
  }
  @if (!genderError && gendersResult !== null) {
    <div class="mt-3 alert alert-info">
      genders and assignees: <br>
      <strong>
        @for (gender of gendersResult; track gender) {
          <hr>
          <span [innerHTML]="gender.gender"></span>:
          <span [innerHTML]="gender.count"></span>
        }
      </strong>
    </div>
  }

  <div class="form-check mt-3">
    <input class="form-check-input" type="checkbox" [(ngModel)]="sectorBoolean" id="sectorCount">
    <label class="form-check-label" for="sectorCount">
      Get the sectors and how many clients are assigned to each
    </label>
  </div>

  @if (sectorError) {
    <div class="mt-3 alert alert-danger">{{ sectorError }}</div>
  }
  @if (!sectorError && sectorResult !== null) {
    <div class="mt-3 alert alert-info">
      sectors and assignees: <br>
      <strong>
        @for (sector of sectorResult; track sector) {
          <hr>
          <span [innerHTML]="sector.sector"></span>:
          <span [innerHTML]="sector.count"></span>
        }
      </strong>
    </div>
  }

  <div class="form-check mt-3">
    <input class="form-check-input" type="checkbox" [(ngModel)]="activityBoolean" id="activityCount">
    <label class="form-check-label" for="activityCount">
      Get the counselingActivities and how many clients are assigned to each
    </label>
  </div>

  @if (activityError) {
    <div class="mt-3 alert alert-danger">{{ activityError }}</div>
  }
  @if (!activityError && activityResult !== null) {
    <div class="mt-3 alert alert-info">
      activities and assignees: <br>
      <strong>
        @for (activity of activityResult; track activity) {
          <hr>
          <span [innerHTML]="activity.activity"></span>:
          <span [innerHTML]="activity.count"></span>
        }
      </strong>
    </div>
  }
</div>
